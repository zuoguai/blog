"use strict";(self["webpackChunkdaily"]=self["webpackChunkdaily"]||[]).push([[360],{360:function(e,t,a){a.r(t),a.d(t,{default:function(){return xt}});var l=a(3396);function s(e,t,a,s,n,o){const i=(0,l.up)("PcStudyView"),r=(0,l.up)("PhoneStudyView"),c=(0,l.up)("SpaceWar");return(0,l.wg)(),(0,l.j4)(c,null,{default:(0,l.w5)((()=>[s.is_phone>1e3?((0,l.wg)(),(0,l.j4)(i,{key:0})):((0,l.wg)(),(0,l.j4)(r,{key:1}))])),_:1})}const n={class:"container",style:{"margin-top":"2%"}};function o(e,t,a,s,o,i){return(0,l.wg)(),(0,l.iD)("div",n,[(0,l.WI)(e.$slots,"default")])}var i={name:"SpaceWar"},r=a(89);const c=(0,r.Z)(i,[["render",o]]);var u=c,_=a(7139),p=a(9242);const m=e=>((0,l.dD)("data-v-38cba168"),e=e(),(0,l.Cn)(),e),g={class:"row opacity-100"},d={class:"col-4"},w={class:"card opacity-100"},b={class:"card-body"},h=m((()=>(0,l._)("p",{class:"text-primary",style:{"font-size":"larger","font-weight":"900"}},"计划",-1))),v=m((()=>(0,l._)("hr",null,null,-1))),y={class:"form-label"},k=m((()=>(0,l._)("kbd",null,"学习时长",-1))),f=m((()=>(0,l._)("span",{class:"form-labe"},"开始时间",-1))),D={class:"text-info"},z=m((()=>(0,l._)("br",null,null,-1))),T=m((()=>(0,l._)("span",{class:"form-labe"},"结束时间 ",-1))),x={class:"text-info"},C=m((()=>(0,l._)("hr",null,null,-1))),H=m((()=>(0,l._)("label",{for:"titleInput",class:"form-label"},[(0,l._)("kbd",null,"计划")],-1))),S=m((()=>(0,l._)("br",null,null,-1))),I=m((()=>(0,l._)("span",{for:"titleInput",class:"form-label"},[(0,l._)("kbd",null,"详细内容")],-1))),j={class:"text-center",style:{"margin-top":"3%"}},U=m((()=>(0,l._)("br",null,null,-1))),L={class:"text-danger"},V={class:"col-8"},P={class:"table table-borderless"},B={scope:"col"},W={class:"card"},M={class:"card-body"},q=m((()=>(0,l._)("label",{class:"text-primary",style:{"font-size":"larger","font-weight":"900"}},"学习",-1))),A={key:0,class:"card opacity-50"},K={class:"card-body"},R={style:{"font-size":"small"}},Y={style:{float:"right"}},Z={scope:"row"},$={class:"card opacity-100"},E={class:"card-body"},F={class:""},G=m((()=>(0,l._)("span",{class:""},"计划：",-1))),J={key:0,class:"small text-warning",style:{float:"right"}},N={key:1,class:"small text-primary",style:{float:"right"}},O={class:""},Q=m((()=>(0,l._)("span",{class:""},"详细内容：",-1))),X={class:""},ee=m((()=>(0,l._)("span",{class:""},"开始时间：",-1))),te=m((()=>(0,l._)("span",{class:""},"时长：",-1))),ae=m((()=>(0,l._)("span",{class:""},"作者：",-1))),le=m((()=>(0,l._)("br",null,null,-1))),se={key:0,class:"progress"},ne={"aria-label":"Page"},oe={class:"pagination",style:{float:"right"}},ie=m((()=>(0,l._)("a",{class:"page-link",href:"#"},"上一页",-1))),re=[ie],ce=["onClick"],ue={class:"page-link",href:"#"},_e=m((()=>(0,l._)("a",{class:"page-link",href:"#"},"下一页",-1))),pe=[_e];function me(e,t,a,s,n,o){const i=(0,l.up)("SpaceWar");return(0,l.wg)(),(0,l.j4)(i,null,{default:(0,l.w5)((()=>[(0,l._)("div",g,[(0,l._)("div",d,[(0,l._)("div",w,[(0,l._)("div",b,[h,v,(0,l._)("span",y,[k,(0,l.Uk)(" "+(0,_.zw)(s.timeLength)+"分钟",1)]),(0,l.wy)((0,l._)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>s.timeLength=e),type:"range",class:"form-range",min:"1",max:"180",id:"customRange2"},null,512),[[p.nr,s.timeLength]]),f,(0,l._)("span",D,(0,_.zw)(" "+s.now_time),1),z,T,(0,l._)("span",x,(0,_.zw)(" "+s.end_time),1),C,H,(0,l.wy)((0,l._)("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=e=>s.tittle=e),class:"form-control",id:"titleInput",placeholder:"学习科目/知识点..."},null,512),[[p.nr,s.tittle]]),S,I,(0,l.wy)((0,l._)("textarea",{"onUpdate:modelValue":t[2]||(t[2]=e=>s.content=e),class:"form-control",id:"Textarea",placeholder:"描述学习...",rows:"4"},null,512),[[p.nr,s.content]]),(0,l._)("div",j,[(0,l._)("button",{onClick:t[3]||(t[3]=(...e)=>s.set_post&&s.set_post(...e)),class:"btn btn-info"},"开始学习"),U,(0,l._)("label",L,(0,_.zw)(s.error_message),1)])])])]),(0,l._)("div",V,[(0,l._)("table",P,[(0,l._)("thead",null,[(0,l._)("tr",null,[(0,l._)("th",B,[(0,l._)("div",W,[(0,l._)("div",M,[q,""!=s.hitokoto?((0,l.wg)(),(0,l.iD)("div",A,[(0,l._)("div",K,[(0,l._)("span",R,[(0,l._)("span",null,(0,_.zw)(s.hitokoto.data.hitokoto),1),(0,l._)("span",Y,(0,_.zw)("——"+s.hitokoto.data.from),1)])])])):(0,l.kq)("",!0)])])])])]),(0,l._)("tbody",null,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(s.posts,(a=>((0,l.wg)(),(0,l.iD)("tr",{key:a.post_id},[(0,l._)("th",Z,[(0,l._)("div",$,[(0,l._)("div",E,[(0,l._)("p",F,[G,(0,l._)("span",{class:(0,_.C_)("small "+a.color)},(0,_.zw)(a.tittle),3),(new Date).getTime()<new Date(a.write_time).getTime()+60*a.time_length*1e3?((0,l.wg)(),(0,l.iD)("label",J," 剩余 "+(0,_.zw)(Math.floor((new Date(a.write_time).getTime()+60*a.time_length*1e3-(new Date).getTime())/6e4))+" 分钟",1)):((0,l.wg)(),(0,l.iD)("label",N,"已完成"))]),(0,l._)("p",O,[Q,(0,l._)("span",{class:(0,_.C_)("small "+a.color)},(0,_.zw)(a.content),3)]),(0,l._)("p",X,[ee,(0,l._)("span",{class:(0,_.C_)("small "+a.color)},(0,_.zw)(new Date(a.write_time).toLocaleString())+"   ",3),te,(0,l._)("span",{class:(0,_.C_)("small "+a.color)},(0,_.zw)(a.time_length)+"分钟   ",3),a.username==e.$store.state.user.username&&(new Date).getTime()<new Date(a.write_time).getTime()+60*a.time_length*1e3?((0,l.wg)(),(0,l.iD)("button",{key:0,onClick:t[4]||(t[4]=(...e)=>s.delete_post&&s.delete_post(...e)),class:"btn btn-info btn-sm",style:{float:"right"}},"取消计划")):(0,l.kq)("",!0)]),(0,l._)("p",null,[ae,(0,l._)("span",{class:(0,_.C_)("small "+a.color)},[(0,l._)("kbd",null,(0,_.zw)(a.username),1),(0,l.Uk)("   ")],2),le]),(new Date).getTime()<new Date(a.write_time).getTime()+60*a.time_length*1e3?((0,l.wg)(),(0,l.iD)("div",se,[(0,l._)("div",{class:"progress-bar progress-bar-striped progress-bar-animated",role:"progressbar",style:(0,_.j5)("width: "+parseInt(((new Date).getTime()-new Date(a.write_time).getTime())/60/10/a.time_length)+"%;"),"aria-valuenow":"25","aria-valuemin":"0","aria-valuemax":"100"},(0,_.zw)(parseInt(((new Date).getTime()-new Date(a.write_time).getTime())/60/10/a.time_length))+"%",5)])):(0,l.kq)("",!0)])])])])))),128))])]),(0,l._)("nav",ne,[(0,l._)("ul",oe,[(0,l._)("li",{class:"page-item",onClick:t[5]||(t[5]=e=>s.click_page(-1))},re),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(s.showPage,(e=>((0,l.wg)(),(0,l.iD)("li",{onClick:t=>s.click_page(e.number),class:(0,_.C_)("page-item "+e.is_active),key:e.number},[(0,l._)("a",ue,(0,_.zw)(e.number),1)],10,ce)))),128)),(0,l._)("li",{class:"page-item",onClick:t[6]||(t[6]=e=>s.click_page(0))},pe)])])])])])),_:1})}a(7658);var ge=a(4870),de=a(65),we=a(7387),be=a.n(we),he={name:"PcStudyView",components:{SpaceWar:u},setup(){new Date;const e=(0,de.oR)();let t=(0,ge.iH)("");const a=(0,ge.iH)([]),l=6;let s=1,n=1,o=(0,ge.iH)([]),i=(0,ge.iH)();i.value=30;let r=(0,ge.iH)(""),c=(0,ge.iH)(""),u=(0,ge.iH)(""),_=(0,ge.iH)("");setInterval((()=>{r.value=(new Date).toLocaleTimeString(),c.value=new Date((new Date).getTime()+60*i.value*1e3).toLocaleTimeString()}),1e3);const p=()=>{_.value="",e.state.user.is_login?u.value.length<1||t.value.length<1?_.value="不能为空":be().ajax({url:e.state.BaseUrl+"/api/post/",type:"post",headers:{Authorization:"Bearer "+e.state.user.token},data:{user_id:e.state.user.user_id,tittle:u.value,time_length:i.value,write_time:new Date,content:t.value},success(e){1!=e.code?_.value=e.content.message:(_.value="",u.value="",t.value=""),g(1)},error(e){console.log("post发布失败"),_.value=e.message}}):_.value="只有作怪才能开始学习"},m=()=>{be().ajax({url:e.state.BaseUrl+"/api/post/",type:"delete",headers:{Authorization:"Bearer "+e.state.user.token},data:{user_id:e.state.user.user_id},success(e){1!=e.code?console.log("失败"):g(1)},error(e){console.log("失败"),_.value=e.message}})},g=t=>{s=t,be().ajax({url:e.state.BaseUrl+"/api/post/common/",type:"get",data:{page:s},success(e){1==e.code?(e=e.content,a.value=e.items,console.log(e),n=e.page_count,d()):console.log(e.message)},error(e){console.log(e.message),console.log("拿页面失败")}})};g(1);const d=()=>{let e=parseInt(Math.ceil(n/l)),t=[];for(let a=s-2;a<s+2;a++)a>=1&&a<=e&&t.push({number:a,is_active:a===s?"active":""});o.value=t},w=e=>{-1===e?e=s-1:0===e&&(e=s+1);let t=parseInt(Math.ceil(n/l));e>=1&&e<=t&&g(e)};let b=(0,ge.iH)("");const h=()=>{b.value="",be().ajax({type:"get",url:"https://v2.alapi.cn/api/hitokoto",data:{token:e.state.music.token},success(e){b.value=e,console.log(e)}})};return h(),{hitokoto:b,click_page:w,posts:a,showPage:o,content:t,timeLength:i,now_time:r,end_time:c,set_post:p,delete_post:m,tittle:u,error_message:_}}};const ve=(0,r.Z)(he,[["render",me],["__scopeId","data-v-38cba168"]]);var ye=ve;const ke=e=>((0,l.dD)("data-v-00c0238e"),e=e(),(0,l.Cn)(),e),fe={class:"modal",id:"myModal"},De={class:"modal-dialog"},ze={class:"modal-content"},Te=ke((()=>(0,l._)("div",{class:"modal-header"},[(0,l._)("p",{class:"text-primary",style:{"font-size":"larger","font-weight":"900"}},"发布学习"),(0,l._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal"})],-1))),xe={class:"modal-body"},Ce={class:"form-label"},He=ke((()=>(0,l._)("span",{class:"form-labe"},"开始时间: ",-1))),Se={class:"text-info"},Ie=ke((()=>(0,l._)("br",null,null,-1))),je=ke((()=>(0,l._)("span",{class:"form-labe"},"结束时间: ",-1))),Ue={class:"text-info"},Le=ke((()=>(0,l._)("hr",null,null,-1))),Ve=ke((()=>(0,l._)("label",{for:"titleInput",class:"form-label"},"计划：",-1))),Pe=ke((()=>(0,l._)("br",null,null,-1))),Be=ke((()=>(0,l._)("label",{for:"titleInput",class:"form-label"},"详细内容：",-1))),We={class:"modal-footer"},Me=ke((()=>(0,l._)("button",{type:"button",class:"btn btn-danger","data-bs-dismiss":"modal"},"关闭",-1))),qe={class:"text-danger"},Ae={style:{"margin-top":"3%"}},Ke={class:"table table-borderless"},Re={scope:"col"},Ye={class:"text-warning",style:{"font-weight":"600"}},Ze=ke((()=>(0,l._)("br",null,null,-1))),$e={key:0,class:"btn btn-primary btn-sm","data-bs-toggle":"modal","data-bs-target":"#myModal",style:{float:"left"}},Ee={scope:"row"},Fe={class:"card opacity-100"},Ge={class:"card-body"},Je=ke((()=>(0,l._)("span",{class:""},[(0,l._)("kbd",null,"计划")],-1))),Ne={key:0,class:"small text-warning",style:{float:"right"}},Oe={key:1,class:"small text-primary",style:{float:"right"}},Qe=ke((()=>(0,l._)("br",null,null,-1))),Xe=ke((()=>(0,l._)("span",{class:""},[(0,l._)("kbd",null,"内容")],-1))),et=ke((()=>(0,l._)("br",null,null,-1))),tt=ke((()=>(0,l._)("span",{class:""},[(0,l._)("kbd",null,"开始时间")],-1))),at=ke((()=>(0,l._)("br",null,null,-1))),lt=ke((()=>(0,l._)("span",{class:""},[(0,l._)("kbd",null,"时长")],-1))),st=ke((()=>(0,l._)("br",null,null,-1))),nt=ke((()=>(0,l._)("span",{class:""},[(0,l._)("kbd",null,"来自")],-1))),ot=["onClick"],it={key:3,class:"progress"},rt={class:"card opacity-50"},ct={class:"card-body"},ut={key:0,style:{"font-size":"small"}},_t={style:{float:"right"}},pt={"aria-label":"Page"},mt={class:"pagination",style:{float:"right"}},gt=ke((()=>(0,l._)("a",{class:"page-link",href:"#"},"上一页",-1))),dt=[gt],wt=["onClick"],bt={class:"page-link",href:"#"},ht=ke((()=>(0,l._)("a",{class:"page-link",href:"#"},"下一页",-1))),vt=[ht];function yt(e,t,a,s,n,o){const i=(0,l.up)("SpaceWar");return(0,l.wg)(),(0,l.j4)(i,null,{default:(0,l.w5)((()=>[(0,l._)("div",fe,[(0,l._)("div",De,[(0,l._)("div",ze,[Te,(0,l._)("div",xe,[(0,l._)("label",Ce,"学习时长："+(0,_.zw)(s.timeLength)+"分钟",1),(0,l.wy)((0,l._)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>s.timeLength=e),type:"range",class:"form-range",min:"1",max:"180",id:"customRange2"},null,512),[[p.nr,s.timeLength]]),He,(0,l._)("span",Se,(0,_.zw)(s.now_time),1),Ie,je,(0,l._)("span",Ue,(0,_.zw)(s.end_time),1),Le,Ve,(0,l.wy)((0,l._)("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=e=>s.tittle=e),class:"form-control",id:"titleInput",placeholder:"学习科目/知识点..."},null,512),[[p.nr,s.tittle]]),Pe,Be,(0,l.wy)((0,l._)("textarea",{"onUpdate:modelValue":t[2]||(t[2]=e=>s.content=e),class:"form-control",id:"Textarea",placeholder:"描述学习...",rows:"4"},null,512),[[p.nr,s.content]])]),(0,l._)("div",We,[(0,l._)("button",{onClick:t[3]||(t[3]=(...e)=>s.set_post&&s.set_post(...e)),class:"btn btn-info"},"开始"),Me,(0,l._)("label",qe,(0,_.zw)(s.error_message),1)])])])]),(0,l._)("div",Ae,[(0,l._)("table",Ke,[(0,l._)("thead",null,[(0,l._)("tr",null,[(0,l._)("th",Re,[(0,l._)("p",Ye,[(0,l.Uk)("计划 "),Ze,e.$store.state.user.is_login?((0,l.wg)(),(0,l.iD)("button",$e,"开始我的学习")):(0,l.kq)("",!0)])])])]),(0,l._)("tbody",null,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(s.posts,(a=>((0,l.wg)(),(0,l.iD)("tr",{key:a.post_id},[(0,l._)("th",Ee,[(0,l._)("div",Fe,[(0,l._)("div",Ge,[Je,(0,l._)("span",{class:(0,_.C_)("small "+a.Tcolor)},(0,_.zw)(" "+a.tittle),3),(new Date).getTime()<new Date(a.write_time).getTime()+60*a.time_length*1e3?((0,l.wg)(),(0,l.iD)("span",Ne," 剩余 "+(0,_.zw)(Math.floor((new Date(a.write_time).getTime()+60*a.time_length*1e3-(new Date).getTime())/6e4))+" 分钟",1)):((0,l.wg)(),(0,l.iD)("span",Oe,"已完成")),Qe,Xe,(0,l._)("span",{class:(0,_.C_)("small "+a.Tcolor)},(0,_.zw)(" "+a.content),3),et,tt,(0,l._)("span",{class:(0,_.C_)("small "+a.Tcolor)},(0,_.zw)(" "+new Date(a.write_time).toLocaleString()),3),at,lt,(0,l._)("span",{class:(0,_.C_)("small "+a.Tcolor)},(0,_.zw)(" "+a.time_length)+"分钟   ",3),st,nt,(0,l._)("span",{onClick:t=>e.get_friend_info(a.user_id),class:(0,_.C_)("small "+a.Tcolor)},(0,_.zw)(" "+a.username),11,ot),a.username==e.$store.state.user.username&&(new Date).getTime()<new Date(a.write_time).getTime()+60*a.time_length*1e3?((0,l.wg)(),(0,l.iD)("button",{key:2,onClick:t[4]||(t[4]=(...e)=>s.delete_post&&s.delete_post(...e)),class:"btn btn-info btn-sm",style:{float:"right"}},"取消计划")):(0,l.kq)("",!0),(new Date).getTime()<new Date(a.write_time).getTime()+60*a.time_length*1e3?((0,l.wg)(),(0,l.iD)("div",it,[(0,l._)("div",{class:"progress-bar progress-bar-striped progress-bar-animated",role:"progressbar",style:(0,_.j5)("width: "+parseInt(((new Date).getTime()-new Date(a.write_time).getTime())/60/10/a.time_length)+"%;"),"aria-valuenow":"25","aria-valuemin":"0","aria-valuemax":"100"},(0,_.zw)(parseInt(((new Date).getTime()-new Date(a.write_time).getTime())/60/10/a.time_length))+"%",5)])):(0,l.kq)("",!0)])])])])))),128)),(0,l._)("div",rt,[(0,l._)("div",ct,[""!=s.hitokoto?((0,l.wg)(),(0,l.iD)("span",ut,[(0,l._)("p",null,(0,_.zw)(s.hitokoto.data.hitokoto),1),(0,l._)("p",_t,(0,_.zw)("——"+s.hitokoto.data.from),1)])):(0,l.kq)("",!0)])])])]),(0,l._)("nav",pt,[(0,l._)("ul",mt,[(0,l._)("li",{class:"page-item",onClick:t[5]||(t[5]=e=>s.click_page(-1))},dt),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(s.showPage,(e=>((0,l.wg)(),(0,l.iD)("li",{onClick:t=>s.click_page(e.number),class:(0,_.C_)("page-item "+e.is_active),key:e.number},[(0,l._)("a",bt,(0,_.zw)(e.number),1)],10,wt)))),128)),(0,l._)("li",{class:"page-item",onClick:t[6]||(t[6]=e=>s.click_page(0))},vt)])])])])),_:1})}var kt={name:"PhoneStudyView",components:{SpaceWar:u},setup(){new Date;const e=(0,de.oR)();let t=(0,ge.iH)("");const a=(0,ge.iH)([]),l=6;let s=1,n=1,o=(0,ge.iH)([]),i=(0,ge.iH)();i.value=30;let r=(0,ge.iH)(""),c=(0,ge.iH)(""),u=(0,ge.iH)(""),_=(0,ge.iH)("");setInterval((()=>{r.value=(new Date).toLocaleTimeString(),c.value=new Date((new Date).getTime()+60*i.value*1e3).toLocaleTimeString()}),1e3);const p=()=>{_.value="",e.state.user.is_login?u.value.length<1||t.value.length<1?_.value="不能为空":be().ajax({url:e.state.BaseUrl+"/api/post/",type:"post",headers:{Authorization:"Bearer "+e.state.user.token},data:{user_id:e.state.user.user_id,tittle:u.value,time_length:i.value,write_time:new Date,content:t.value},success(e){1!=e.code?_.value=e.content.message:(_.value="",u.value="",t.value=""),g(1)},error(e){console.log("post发布失败"),_.value=e.message}}):_.value="只有作怪才能开始学习"},m=()=>{be().ajax({url:e.state.BaseUrl+"/api/post/",type:"delete",headers:{Authorization:"Bearer "+e.state.user.token},data:{user_id:e.state.user.user_id},success(e){1!=e.code?console.log("失败"):g(1)},error(e){console.log("失败"),_.value=e.message}})},g=t=>{s=t,be().ajax({url:e.state.BaseUrl+"/api/post/common/",type:"get",data:{page:s},success(e){1==e.code?(e=e.content,a.value=e.items,console.log(e),n=e.page_count,d()):console.log(e.message)},error(e){console.log(e.message),console.log("拿页面失败")}})};g(1);const d=()=>{let e=parseInt(Math.ceil(n/l)),t=[];for(let a=s-2;a<s+2;a++)a>=1&&a<=e&&t.push({number:a,is_active:a===s?"active":""});o.value=t},w=e=>{-1===e?e=s-1:0===e&&(e=s+1);let t=parseInt(Math.ceil(n/l));e>=1&&e<=t&&g(e)};let b=(0,ge.iH)("");const h=()=>{b.value="",be().ajax({type:"get",url:"https://v2.alapi.cn/api/hitokoto",data:{token:e.state.music.token},success(e){b.value=e,console.log(e)}})};return h(),{hitokoto:b,click_page:w,posts:a,showPage:o,content:t,timeLength:i,now_time:r,end_time:c,set_post:p,delete_post:m,tittle:u,error_message:_}}};const ft=(0,r.Z)(kt,[["render",yt],["__scopeId","data-v-00c0238e"]]);var Dt=ft,zt={name:"StudyView",components:{SpaceWar:u,PcStudyView:ye,PhoneStudyView:Dt},setup(){let e=(0,ge.iH)("");return e.value=document.documentElement.clientWidth,{is_phone:e}}};const Tt=(0,r.Z)(zt,[["render",s]]);var xt=Tt}}]);
//# sourceMappingURL=360.cc98ecd5.js.map