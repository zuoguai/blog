"use strict";(self["webpackChunkdaily"]=self["webpackChunkdaily"]||[]).push([[83],{6083:function(e,t,a){a.r(t),a.d(t,{default:function(){return yt}});var l=a(3396);function s(e,t,a,s,n,o){const i=(0,l.up)("PcStudyView"),r=(0,l.up)("PhoneStudyView"),c=(0,l.up)("SpaceWar");return(0,l.wg)(),(0,l.j4)(c,null,{default:(0,l.w5)((()=>[s.is_phone>1e3?((0,l.wg)(),(0,l.j4)(i,{key:0})):((0,l.wg)(),(0,l.j4)(r,{key:1}))])),_:1})}var n=a(7055),o=a(7139),i=a(9242);const r=e=>((0,l.dD)("data-v-189d92a3"),e=e(),(0,l.Cn)(),e),c={class:"row opacity-100"},u={class:"col-4"},_={class:"card opacity-100 my-div-body"},p={class:"card-body"},m=r((()=>(0,l._)("p",{class:"text-warning",style:{"font-size":"larger","font-weight":"900"}},"计划",-1))),g=r((()=>(0,l._)("hr",null,null,-1))),d={class:"form-label"},w=r((()=>(0,l._)("kbd",null,"学习时长",-1))),h=r((()=>(0,l._)("span",{class:"form-labe"},"开始时间",-1))),b={class:"text-info"},v=r((()=>(0,l._)("br",null,null,-1))),y=r((()=>(0,l._)("span",{class:"form-labe"},"结束时间 ",-1))),k={class:"text-info"},f=r((()=>(0,l._)("hr",null,null,-1))),D=r((()=>(0,l._)("label",{for:"titleInput",class:"form-label"},[(0,l._)("kbd",null,"计划")],-1))),z=r((()=>(0,l._)("br",null,null,-1))),T=r((()=>(0,l._)("span",{for:"titleInput",class:"form-label"},[(0,l._)("kbd",null,"详细内容")],-1))),x={class:"text-center",style:{"margin-top":"3%"}},C=r((()=>(0,l._)("br",null,null,-1))),H={class:"text-danger"},S={class:"col-8"},I={class:"card my-div-body"},j={class:"card-body"},U=r((()=>(0,l._)("label",{class:"text-warning",style:{"font-size":"larger","font-weight":"900"}},"学习",-1))),L={key:0,style:{"font-size":"small"}},V={style:{float:"right"}},P={class:"table table-borderless"},B=r((()=>(0,l._)("thead",null,[(0,l._)("tr",null,[(0,l._)("th",{scope:"col"})])],-1))),M={scope:"row"},q={class:"card opacity-100 my-div-body"},W={class:"card-body"},Z={class:""},A=r((()=>(0,l._)("span",{class:""},"计划：",-1))),K={key:0,class:"small text-warning",style:{float:"right"}},R={key:1,class:"small text-primary",style:{float:"right"}},Y={class:""},$=r((()=>(0,l._)("span",{class:""},"详细内容：",-1))),E={class:""},F=r((()=>(0,l._)("span",{class:""},"开始时间：",-1))),G=r((()=>(0,l._)("span",{class:""},"时长：",-1))),J=r((()=>(0,l._)("span",{class:""},"作者：",-1))),N=r((()=>(0,l._)("br",null,null,-1))),O={key:0,class:"progress"},Q={"aria-label":"Page"},X={class:"pagination",style:{float:"right"}},ee=r((()=>(0,l._)("a",{class:"page-link",href:"#"},"上一页",-1))),te=[ee],ae=["onClick"],le={class:"page-link",href:"#"},se=r((()=>(0,l._)("a",{class:"page-link",href:"#"},"下一页",-1))),ne=[se];function oe(e,t,a,s,n,r){const ee=(0,l.up)("SpaceWar");return(0,l.wg)(),(0,l.j4)(ee,null,{default:(0,l.w5)((()=>[(0,l._)("div",c,[(0,l._)("div",u,[(0,l._)("div",_,[(0,l._)("div",p,[m,g,(0,l._)("span",d,[w,(0,l.Uk)(" "+(0,o.zw)(s.timeLength)+"分钟",1)]),(0,l.wy)((0,l._)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>s.timeLength=e),type:"range",class:"form-range",min:"1",max:"180",id:"customRange2"},null,512),[[i.nr,s.timeLength]]),h,(0,l._)("span",b,(0,o.zw)(" "+s.now_time),1),v,y,(0,l._)("span",k,(0,o.zw)(" "+s.end_time),1),f,D,(0,l.wy)((0,l._)("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=e=>s.tittle=e),class:"form-control",id:"titleInput",placeholder:"学习科目/知识点..."},null,512),[[i.nr,s.tittle]]),z,T,(0,l.wy)((0,l._)("textarea",{"onUpdate:modelValue":t[2]||(t[2]=e=>s.content=e),class:"form-control",id:"Textarea",placeholder:"描述学习...",rows:"4"},null,512),[[i.nr,s.content]]),(0,l._)("div",x,[(0,l._)("button",{onClick:t[3]||(t[3]=(...e)=>s.set_post&&s.set_post(...e)),class:"btn btn-info"},"开始学习"),C,(0,l._)("label",H,(0,o.zw)(s.error_message),1)])])])]),(0,l._)("div",S,[(0,l._)("div",I,[(0,l._)("div",j,[U,null!=s.hitokoto&&null!=s.hitokoto.data&&null!=s.hitokoto.data.content&&""!=s.hitokoto?((0,l.wg)(),(0,l.iD)("p",L,[(0,l._)("span",null,(0,o.zw)(s.hitokoto.data.content),1),(0,l._)("span",V,(0,o.zw)("——"+s.hitokoto.data.author),1)])):(0,l.kq)("",!0)])]),(0,l._)("table",P,[B,(0,l._)("tbody",null,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(s.posts,(a=>((0,l.wg)(),(0,l.iD)("tr",{key:a.post_id},[(0,l._)("th",M,[(0,l._)("div",q,[(0,l._)("div",W,[(0,l._)("p",Z,[A,(0,l._)("span",{class:(0,o.C_)("small "+a.color)},(0,o.zw)(a.tittle),3),(new Date).getTime()<new Date(a.write_time).getTime()+60*a.time_length*1e3?((0,l.wg)(),(0,l.iD)("label",K," 剩余 "+(0,o.zw)(Math.floor((new Date(a.write_time).getTime()+60*a.time_length*1e3-(new Date).getTime())/6e4))+" 分钟",1)):((0,l.wg)(),(0,l.iD)("label",R,"已完成"))]),(0,l._)("p",Y,[$,(0,l._)("span",{class:(0,o.C_)("small "+a.color)},(0,o.zw)(a.content),3)]),(0,l._)("p",E,[F,(0,l._)("span",{class:(0,o.C_)("small "+a.color)},(0,o.zw)(new Date(a.write_time).toLocaleString())+"   ",3),G,(0,l._)("span",{class:(0,o.C_)("small "+a.color)},(0,o.zw)(a.time_length)+"分钟   ",3),a.username==e.$store.state.user.username&&(new Date).getTime()<new Date(a.write_time).getTime()+60*a.time_length*1e3?((0,l.wg)(),(0,l.iD)("button",{key:0,onClick:t[4]||(t[4]=(...e)=>s.delete_post&&s.delete_post(...e)),class:"btn btn-info btn-sm",style:{float:"right"}},"取消计划")):(0,l.kq)("",!0)]),(0,l._)("p",null,[J,(0,l._)("span",{class:(0,o.C_)("small "+a.color)},[(0,l._)("kbd",null,(0,o.zw)(a.username),1),(0,l.Uk)("   ")],2),N]),(new Date).getTime()<new Date(a.write_time).getTime()+60*a.time_length*1e3?((0,l.wg)(),(0,l.iD)("div",O,[(0,l._)("div",{class:"progress-bar progress-bar-striped progress-bar-animated",role:"progressbar",style:(0,o.j5)("width: "+parseInt(((new Date).getTime()-new Date(a.write_time).getTime())/60/10/a.time_length)+"%;"),"aria-valuenow":"25","aria-valuemin":"0","aria-valuemax":"100"},(0,o.zw)(parseInt(((new Date).getTime()-new Date(a.write_time).getTime())/60/10/a.time_length))+"%",5)])):(0,l.kq)("",!0)])])])])))),128))])]),(0,l._)("nav",Q,[(0,l._)("ul",X,[(0,l._)("li",{class:"page-item",onClick:t[5]||(t[5]=e=>s.click_page(-1))},te),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(s.showPage,(e=>((0,l.wg)(),(0,l.iD)("li",{onClick:t=>s.click_page(e.number),class:(0,o.C_)("page-item "+e.is_active),key:e.number},[(0,l._)("a",le,(0,o.zw)(e.number),1)],10,ae)))),128)),(0,l._)("li",{class:"page-item",onClick:t[6]||(t[6]=e=>s.click_page(0))},ne)])])])])])),_:1})}a(7658);var ie=a(4870),re=a(65),ce=a(7387),ue=a.n(ce),_e={name:"PcStudyView",components:{SpaceWar:n.Z},setup(){new Date;const e=(0,re.oR)();let t=(0,ie.iH)("");const a=(0,ie.iH)([]),l=6;let s=1,n=1,o=(0,ie.iH)([]),i=(0,ie.iH)();i.value=30;let r=(0,ie.iH)(""),c=(0,ie.iH)(""),u=(0,ie.iH)(""),_=(0,ie.iH)("");setInterval((()=>{r.value=(new Date).toLocaleTimeString(),c.value=new Date((new Date).getTime()+60*i.value*1e3).toLocaleTimeString()}),100);const p=()=>{_.value="",e.state.user.is_login?u.value.length<1||t.value.length<1?_.value="不能为空":ue().ajax({url:e.state.BaseUrl+"/api/post/",type:"post",headers:{Authorization:"Bearer "+e.state.user.token},data:{user_id:e.state.user.user_id,tittle:u.value,time_length:i.value,write_time:new Date,content:t.value},success(e){1!=e.code?_.value=e.content.message:(_.value="",u.value="",t.value=""),g(1)},error(e){console.log("post发布失败"),_.value=e.message}}):_.value="只有作怪才能开始学习"},m=()=>{ue().ajax({url:e.state.BaseUrl+"/api/post/",type:"delete",headers:{Authorization:"Bearer "+e.state.user.token},data:{user_id:e.state.user.user_id},success(e){1!=e.code?console.log("失败"):g(1)},error(e){console.log("失败"),_.value=e.message}})},g=t=>{t>3&&!e.state.user.is_login?alert("不给看了"):(s=t,ue().ajax({url:e.state.BaseUrl+"/api/post/common/",type:"get",data:{page:s},success(e){1==e.code?(e=e.content,a.value=e.items,console.log(e),n=e.page_count,d()):console.log(e.message)},error(e){console.log(e.message),console.log("拿页面失败")}}))};g(1);const d=()=>{let e=parseInt(Math.ceil(n/l)),t=[];for(let a=s-2;a<s+2;a++)a>=1&&a<=e&&t.push({number:a,is_active:a===s?"active":""});o.value=t},w=e=>{-1===e?e=s-1:0===e&&(e=s+1);let t=parseInt(Math.ceil(n/l));e>=1&&e<=t&&g(e)};let h=(0,ie.iH)("");const b=()=>{let t=1;t=1+Math.floor(45*Math.random()),h.value="",t=28,ue().ajax({type:"get",url:"https://v2.alapi.cn/api/mingyan",data:{typeid:t,token:e.state.music.token},success(e){h.value=e}})};return b(),{hitokoto:h,click_page:w,posts:a,showPage:o,content:t,timeLength:i,now_time:r,end_time:c,set_post:p,delete_post:m,tittle:u,error_message:_}}},pe=a(89);const me=(0,pe.Z)(_e,[["render",oe],["__scopeId","data-v-189d92a3"]]);var ge=me;const de=e=>((0,l.dD)("data-v-55abd2a6"),e=e(),(0,l.Cn)(),e),we={class:"modal",id:"myModal"},he={class:"modal-dialog"},be={class:"modal-content"},ve=de((()=>(0,l._)("div",{class:"modal-header"},[(0,l._)("p",{class:"text-primary",style:{"font-size":"larger","font-weight":"900"}},"发布学习"),(0,l._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal"})],-1))),ye={class:"modal-body"},ke={class:"form-label"},fe=de((()=>(0,l._)("span",{class:"form-labe"},"开始时间: ",-1))),De={class:"text-info"},ze=de((()=>(0,l._)("br",null,null,-1))),Te=de((()=>(0,l._)("span",{class:"form-labe"},"结束时间: ",-1))),xe={class:"text-info"},Ce=de((()=>(0,l._)("hr",null,null,-1))),He=de((()=>(0,l._)("label",{for:"titleInput",class:"form-label"},"计划：",-1))),Se=de((()=>(0,l._)("br",null,null,-1))),Ie=de((()=>(0,l._)("label",{for:"titleInput",class:"form-label"},"详细内容：",-1))),je={class:"modal-footer"},Ue=de((()=>(0,l._)("button",{type:"button",class:"btn btn-danger","data-bs-dismiss":"modal"},"关闭",-1))),Le={class:"text-danger"},Ve={style:{"margin-top":"3%"}},Pe={class:"table table-borderless"},Be={scope:"col"},Me={class:"text-warning",style:{"font-weight":"600"}},qe=de((()=>(0,l._)("br",null,null,-1))),We={key:0,class:"btn btn-primary btn-sm","data-bs-toggle":"modal","data-bs-target":"#myModal",style:{float:"left"}},Ze={scope:"row"},Ae={class:"card opacity-100"},Ke={class:"card-body"},Re=de((()=>(0,l._)("span",{class:""},[(0,l._)("kbd",null,"计划")],-1))),Ye={key:0,class:"small text-warning",style:{float:"right"}},$e={key:1,class:"small text-primary",style:{float:"right"}},Ee=de((()=>(0,l._)("br",null,null,-1))),Fe=de((()=>(0,l._)("span",{class:""},[(0,l._)("kbd",null,"内容")],-1))),Ge=de((()=>(0,l._)("br",null,null,-1))),Je=de((()=>(0,l._)("span",{class:""},[(0,l._)("kbd",null,"开始时间")],-1))),Ne=de((()=>(0,l._)("br",null,null,-1))),Oe=de((()=>(0,l._)("span",{class:""},[(0,l._)("kbd",null,"时长")],-1))),Qe=de((()=>(0,l._)("br",null,null,-1))),Xe=de((()=>(0,l._)("span",{class:""},[(0,l._)("kbd",null,"来自")],-1))),et=["onClick"],tt={key:3,class:"progress"},at={class:"card opacity-50"},lt={class:"card-body"},st={key:0,style:{"font-size":"small"}},nt={style:{float:"right"}},ot={"aria-label":"Page"},it={class:"pagination",style:{float:"right"}},rt=de((()=>(0,l._)("a",{class:"page-link",href:"#"},"上一页",-1))),ct=[rt],ut=["onClick"],_t={class:"page-link",href:"#"},pt=de((()=>(0,l._)("a",{class:"page-link",href:"#"},"下一页",-1))),mt=[pt];function gt(e,t,a,s,n,r){const c=(0,l.up)("SpaceWar");return(0,l.wg)(),(0,l.j4)(c,null,{default:(0,l.w5)((()=>[(0,l._)("div",we,[(0,l._)("div",he,[(0,l._)("div",be,[ve,(0,l._)("div",ye,[(0,l._)("label",ke,"学习时长："+(0,o.zw)(s.timeLength)+"分钟",1),(0,l.wy)((0,l._)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>s.timeLength=e),type:"range",class:"form-range",min:"1",max:"180",id:"customRange2"},null,512),[[i.nr,s.timeLength]]),fe,(0,l._)("span",De,(0,o.zw)(s.now_time),1),ze,Te,(0,l._)("span",xe,(0,o.zw)(s.end_time),1),Ce,He,(0,l.wy)((0,l._)("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=e=>s.tittle=e),class:"form-control",id:"titleInput",placeholder:"学习科目/知识点..."},null,512),[[i.nr,s.tittle]]),Se,Ie,(0,l.wy)((0,l._)("textarea",{"onUpdate:modelValue":t[2]||(t[2]=e=>s.content=e),class:"form-control",id:"Textarea",placeholder:"描述学习...",rows:"4"},null,512),[[i.nr,s.content]])]),(0,l._)("div",je,[(0,l._)("button",{onClick:t[3]||(t[3]=(...e)=>s.set_post&&s.set_post(...e)),class:"btn btn-info"},"开始"),Ue,(0,l._)("label",Le,(0,o.zw)(s.error_message),1)])])])]),(0,l._)("div",Ve,[(0,l._)("table",Pe,[(0,l._)("thead",null,[(0,l._)("tr",null,[(0,l._)("th",Be,[(0,l._)("p",Me,[(0,l.Uk)("计划 "),qe,e.$store.state.user.is_login?((0,l.wg)(),(0,l.iD)("button",We,"开始我的学习")):(0,l.kq)("",!0)])])])]),(0,l._)("tbody",null,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(s.posts,(a=>((0,l.wg)(),(0,l.iD)("tr",{key:a.post_id},[(0,l._)("th",Ze,[(0,l._)("div",Ae,[(0,l._)("div",Ke,[Re,(0,l._)("span",{class:(0,o.C_)("small "+a.Tcolor)},(0,o.zw)(" "+a.tittle),3),(new Date).getTime()<new Date(a.write_time).getTime()+60*a.time_length*1e3?((0,l.wg)(),(0,l.iD)("span",Ye," 剩余 "+(0,o.zw)(Math.floor((new Date(a.write_time).getTime()+60*a.time_length*1e3-(new Date).getTime())/6e4))+" 分钟",1)):((0,l.wg)(),(0,l.iD)("span",$e,"已完成")),Ee,Fe,(0,l._)("span",{class:(0,o.C_)("small "+a.Tcolor)},(0,o.zw)(" "+a.content),3),Ge,Je,(0,l._)("span",{class:(0,o.C_)("small "+a.Tcolor)},(0,o.zw)(" "+new Date(a.write_time).toLocaleString()),3),Ne,Oe,(0,l._)("span",{class:(0,o.C_)("small "+a.Tcolor)},(0,o.zw)(" "+a.time_length)+"分钟   ",3),Qe,Xe,(0,l._)("span",{onClick:t=>e.get_friend_info(a.user_id),class:(0,o.C_)("small "+a.Tcolor)},(0,o.zw)(" "+a.username),11,et),a.username==e.$store.state.user.username&&(new Date).getTime()<new Date(a.write_time).getTime()+60*a.time_length*1e3?((0,l.wg)(),(0,l.iD)("button",{key:2,onClick:t[4]||(t[4]=(...e)=>s.delete_post&&s.delete_post(...e)),class:"btn btn-info btn-sm",style:{float:"right"}},"取消计划")):(0,l.kq)("",!0),(new Date).getTime()<new Date(a.write_time).getTime()+60*a.time_length*1e3?((0,l.wg)(),(0,l.iD)("div",tt,[(0,l._)("div",{class:"progress-bar progress-bar-striped progress-bar-animated",role:"progressbar",style:(0,o.j5)("width: "+parseInt(((new Date).getTime()-new Date(a.write_time).getTime())/60/10/a.time_length)+"%;"),"aria-valuenow":"25","aria-valuemin":"0","aria-valuemax":"100"},(0,o.zw)(parseInt(((new Date).getTime()-new Date(a.write_time).getTime())/60/10/a.time_length))+"%",5)])):(0,l.kq)("",!0)])])])])))),128)),(0,l._)("div",at,[(0,l._)("div",lt,[null!=s.hitokoto&&null!=s.hitokoto.data&&null!=s.hitokoto.data.content&&""!=s.hitokoto?((0,l.wg)(),(0,l.iD)("span",st,[(0,l._)("p",null,(0,o.zw)(s.hitokoto.data.content),1),(0,l._)("p",nt,(0,o.zw)("——"+s.hitokoto.data.author),1)])):(0,l.kq)("",!0)])])])]),(0,l._)("nav",ot,[(0,l._)("ul",it,[(0,l._)("li",{class:"page-item",onClick:t[5]||(t[5]=e=>s.click_page(-1))},ct),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(s.showPage,(e=>((0,l.wg)(),(0,l.iD)("li",{onClick:t=>s.click_page(e.number),class:(0,o.C_)("page-item "+e.is_active),key:e.number},[(0,l._)("a",_t,(0,o.zw)(e.number),1)],10,ut)))),128)),(0,l._)("li",{class:"page-item",onClick:t[6]||(t[6]=e=>s.click_page(0))},mt)])])])])),_:1})}var dt={name:"PhoneStudyView",components:{SpaceWar:n.Z},setup(){new Date;const e=(0,re.oR)();let t=(0,ie.iH)("");const a=(0,ie.iH)([]),l=6;let s=1,n=1,o=(0,ie.iH)([]),i=(0,ie.iH)();i.value=30;let r=(0,ie.iH)(""),c=(0,ie.iH)(""),u=(0,ie.iH)(""),_=(0,ie.iH)("");setInterval((()=>{r.value=(new Date).toLocaleTimeString(),c.value=new Date((new Date).getTime()+60*i.value*1e3).toLocaleTimeString()}),1e3);const p=()=>{_.value="",e.state.user.is_login?u.value.length<1||t.value.length<1?_.value="不能为空":ue().ajax({url:e.state.BaseUrl+"/api/post/",type:"post",headers:{Authorization:"Bearer "+e.state.user.token},data:{user_id:e.state.user.user_id,tittle:u.value,time_length:i.value,write_time:new Date,content:t.value},success(e){1!=e.code?_.value=e.content.message:(_.value="",u.value="",t.value=""),g(1)},error(e){console.log("post发布失败"),_.value=e.message}}):_.value="只有作怪才能开始学习"},m=()=>{ue().ajax({url:e.state.BaseUrl+"/api/post/",type:"delete",headers:{Authorization:"Bearer "+e.state.user.token},data:{user_id:e.state.user.user_id},success(e){1!=e.code?console.log("失败"):g(1)},error(e){console.log("失败"),_.value=e.message}})},g=t=>{t>3&&!e.state.user.is_login?alert("不给看了"):(s=t,ue().ajax({url:e.state.BaseUrl+"/api/post/common/",type:"get",data:{page:s},success(e){1==e.code?(e=e.content,a.value=e.items,console.log(e),n=e.page_count,d()):console.log(e.message)},error(e){console.log(e.message),console.log("拿页面失败")}}))};g(1);const d=()=>{let e=parseInt(Math.ceil(n/l)),t=[];for(let a=s-2;a<s+2;a++)a>=1&&a<=e&&t.push({number:a,is_active:a===s?"active":""});o.value=t},w=e=>{-1===e?e=s-1:0===e&&(e=s+1);let t=parseInt(Math.ceil(n/l));e>=1&&e<=t&&g(e)};let h=(0,ie.iH)("");const b=()=>{h.value="",ue().ajax({type:"get",url:"https://v2.alapi.cn/api/shici",data:{type:"all",token:e.state.music.token},success(e){h.value=e}})};return b(),{hitokoto:h,click_page:w,posts:a,showPage:o,content:t,timeLength:i,now_time:r,end_time:c,set_post:p,delete_post:m,tittle:u,error_message:_}}};const wt=(0,pe.Z)(dt,[["render",gt],["__scopeId","data-v-55abd2a6"]]);var ht=wt,bt={name:"StudyView",components:{SpaceWar:n.Z,PcStudyView:ge,PhoneStudyView:ht},setup(){let e=(0,ie.iH)("");return e.value=document.documentElement.clientWidth,{is_phone:e}}};const vt=(0,pe.Z)(bt,[["render",s]]);var yt=vt}}]);
//# sourceMappingURL=83.f0f8cc00.js.map