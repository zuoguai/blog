"use strict";(self["webpackChunkdaily"]=self["webpackChunkdaily"]||[]).push([[751],{751:function(e,t,a){a.r(t),a.d(t,{default:function(){return zt}});var l=a(3396);function s(e,t,a,s,n,o){const i=(0,l.up)("PcStudyView"),r=(0,l.up)("PhoneStudyView"),c=(0,l.up)("SpaceWar");return(0,l.wg)(),(0,l.j4)(c,null,{default:(0,l.w5)((()=>[s.is_phone>1e3?((0,l.wg)(),(0,l.j4)(i,{key:0})):((0,l.wg)(),(0,l.j4)(r,{key:1}))])),_:1})}const n={class:"container",style:{"margin-top":"2%"}};function o(e,t,a,s,o,i){return(0,l.wg)(),(0,l.iD)("div",n,[(0,l.WI)(e.$slots,"default")])}var i={name:"SpaceWar"},r=a(89);const c=(0,r.Z)(i,[["render",o]]);var u=c,_=a(7139),p=a(9242);const m=e=>((0,l.dD)("data-v-08872c3b"),e=e(),(0,l.Cn)(),e),g={class:"row opacity-100"},d={class:"col-4"},w={class:"card opacity-100 my-div-body"},b={class:"card-body"},h=m((()=>(0,l._)("p",{class:"text-warning",style:{"font-size":"larger","font-weight":"900"}},"计划",-1))),v=m((()=>(0,l._)("hr",null,null,-1))),y={class:"form-label"},k=m((()=>(0,l._)("kbd",null,"学习时长",-1))),f=m((()=>(0,l._)("span",{class:"form-labe"},"开始时间",-1))),D={class:"text-info"},z=m((()=>(0,l._)("br",null,null,-1))),T=m((()=>(0,l._)("span",{class:"form-labe"},"结束时间 ",-1))),x={class:"text-info"},C=m((()=>(0,l._)("hr",null,null,-1))),H=m((()=>(0,l._)("label",{for:"titleInput",class:"form-label"},[(0,l._)("kbd",null,"计划")],-1))),S=m((()=>(0,l._)("br",null,null,-1))),I=m((()=>(0,l._)("span",{for:"titleInput",class:"form-label"},[(0,l._)("kbd",null,"详细内容")],-1))),j={class:"text-center",style:{"margin-top":"3%"}},U=m((()=>(0,l._)("br",null,null,-1))),L={class:"text-danger"},V={class:"col-8"},P={class:"card my-div-body"},B={class:"card-body"},M=m((()=>(0,l._)("label",{class:"text-warning",style:{"font-size":"larger","font-weight":"900"}},"学习",-1))),W={key:0,style:{"font-size":"small"}},q={style:{float:"right"}},A={class:"table table-borderless"},K=m((()=>(0,l._)("thead",null,[(0,l._)("tr",null,[(0,l._)("th",{scope:"col"})])],-1))),R={scope:"row"},Y={class:"card opacity-100 my-div-body"},Z={class:"card-body"},$={class:""},E=m((()=>(0,l._)("span",{class:""},"计划：",-1))),F={key:0,class:"small text-warning",style:{float:"right"}},G={key:1,class:"small text-primary",style:{float:"right"}},J={class:""},N=m((()=>(0,l._)("span",{class:""},"详细内容：",-1))),O={class:""},Q=m((()=>(0,l._)("span",{class:""},"开始时间：",-1))),X=m((()=>(0,l._)("span",{class:""},"时长：",-1))),ee=m((()=>(0,l._)("span",{class:""},"作者：",-1))),te=m((()=>(0,l._)("br",null,null,-1))),ae={key:0,class:"progress"},le={"aria-label":"Page"},se={class:"pagination",style:{float:"right"}},ne=m((()=>(0,l._)("a",{class:"page-link",href:"#"},"上一页",-1))),oe=[ne],ie=["onClick"],re={class:"page-link",href:"#"},ce=m((()=>(0,l._)("a",{class:"page-link",href:"#"},"下一页",-1))),ue=[ce];function _e(e,t,a,s,n,o){const i=(0,l.up)("SpaceWar");return(0,l.wg)(),(0,l.j4)(i,null,{default:(0,l.w5)((()=>[(0,l._)("div",g,[(0,l._)("div",d,[(0,l._)("div",w,[(0,l._)("div",b,[h,v,(0,l._)("span",y,[k,(0,l.Uk)(" "+(0,_.zw)(s.timeLength)+"分钟",1)]),(0,l.wy)((0,l._)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>s.timeLength=e),type:"range",class:"form-range",min:"1",max:"180",id:"customRange2"},null,512),[[p.nr,s.timeLength]]),f,(0,l._)("span",D,(0,_.zw)(" "+s.now_time),1),z,T,(0,l._)("span",x,(0,_.zw)(" "+s.end_time),1),C,H,(0,l.wy)((0,l._)("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=e=>s.tittle=e),class:"form-control",id:"titleInput",placeholder:"学习科目/知识点..."},null,512),[[p.nr,s.tittle]]),S,I,(0,l.wy)((0,l._)("textarea",{"onUpdate:modelValue":t[2]||(t[2]=e=>s.content=e),class:"form-control",id:"Textarea",placeholder:"描述学习...",rows:"4"},null,512),[[p.nr,s.content]]),(0,l._)("div",j,[(0,l._)("button",{onClick:t[3]||(t[3]=(...e)=>s.set_post&&s.set_post(...e)),class:"btn btn-info"},"开始学习"),U,(0,l._)("label",L,(0,_.zw)(s.error_message),1)])])])]),(0,l._)("div",V,[(0,l._)("div",P,[(0,l._)("div",B,[M,""!=s.hitokoto?((0,l.wg)(),(0,l.iD)("p",W,[(0,l._)("span",null,(0,_.zw)(s.hitokoto.data.content),1),(0,l._)("span",q,(0,_.zw)("——"+s.hitokoto.data.author),1)])):(0,l.kq)("",!0)])]),(0,l._)("table",A,[K,(0,l._)("tbody",null,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(s.posts,(a=>((0,l.wg)(),(0,l.iD)("tr",{key:a.post_id},[(0,l._)("th",R,[(0,l._)("div",Y,[(0,l._)("div",Z,[(0,l._)("p",$,[E,(0,l._)("span",{class:(0,_.C_)("small "+a.color)},(0,_.zw)(a.tittle),3),(new Date).getTime()<new Date(a.write_time).getTime()+60*a.time_length*1e3?((0,l.wg)(),(0,l.iD)("label",F," 剩余 "+(0,_.zw)(Math.floor((new Date(a.write_time).getTime()+60*a.time_length*1e3-(new Date).getTime())/6e4))+" 分钟",1)):((0,l.wg)(),(0,l.iD)("label",G,"已完成"))]),(0,l._)("p",J,[N,(0,l._)("span",{class:(0,_.C_)("small "+a.color)},(0,_.zw)(a.content),3)]),(0,l._)("p",O,[Q,(0,l._)("span",{class:(0,_.C_)("small "+a.color)},(0,_.zw)(new Date(a.write_time).toLocaleString())+"   ",3),X,(0,l._)("span",{class:(0,_.C_)("small "+a.color)},(0,_.zw)(a.time_length)+"分钟   ",3),a.username==e.$store.state.user.username&&(new Date).getTime()<new Date(a.write_time).getTime()+60*a.time_length*1e3?((0,l.wg)(),(0,l.iD)("button",{key:0,onClick:t[4]||(t[4]=(...e)=>s.delete_post&&s.delete_post(...e)),class:"btn btn-info btn-sm",style:{float:"right"}},"取消计划")):(0,l.kq)("",!0)]),(0,l._)("p",null,[ee,(0,l._)("span",{class:(0,_.C_)("small "+a.color)},[(0,l._)("kbd",null,(0,_.zw)(a.username),1),(0,l.Uk)("   ")],2),te]),(new Date).getTime()<new Date(a.write_time).getTime()+60*a.time_length*1e3?((0,l.wg)(),(0,l.iD)("div",ae,[(0,l._)("div",{class:"progress-bar progress-bar-striped progress-bar-animated",role:"progressbar",style:(0,_.j5)("width: "+parseInt(((new Date).getTime()-new Date(a.write_time).getTime())/60/10/a.time_length)+"%;"),"aria-valuenow":"25","aria-valuemin":"0","aria-valuemax":"100"},(0,_.zw)(parseInt(((new Date).getTime()-new Date(a.write_time).getTime())/60/10/a.time_length))+"%",5)])):(0,l.kq)("",!0)])])])])))),128))])]),(0,l._)("nav",le,[(0,l._)("ul",se,[(0,l._)("li",{class:"page-item",onClick:t[5]||(t[5]=e=>s.click_page(-1))},oe),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(s.showPage,(e=>((0,l.wg)(),(0,l.iD)("li",{onClick:t=>s.click_page(e.number),class:(0,_.C_)("page-item "+e.is_active),key:e.number},[(0,l._)("a",re,(0,_.zw)(e.number),1)],10,ie)))),128)),(0,l._)("li",{class:"page-item",onClick:t[6]||(t[6]=e=>s.click_page(0))},ue)])])])])])),_:1})}a(7658);var pe=a(4870),me=a(65),ge=a(7387),de=a.n(ge),we={name:"PcStudyView",components:{SpaceWar:u},setup(){new Date;const e=(0,me.oR)();let t=(0,pe.iH)("");const a=(0,pe.iH)([]),l=6;let s=1,n=1,o=(0,pe.iH)([]),i=(0,pe.iH)();i.value=30;let r=(0,pe.iH)(""),c=(0,pe.iH)(""),u=(0,pe.iH)(""),_=(0,pe.iH)("");setInterval((()=>{r.value=(new Date).toLocaleTimeString(),c.value=new Date((new Date).getTime()+60*i.value*1e3).toLocaleTimeString()}),100);const p=()=>{_.value="",e.state.user.is_login?u.value.length<1||t.value.length<1?_.value="不能为空":de().ajax({url:e.state.BaseUrl+"/api/post/",type:"post",headers:{Authorization:"Bearer "+e.state.user.token},data:{user_id:e.state.user.user_id,tittle:u.value,time_length:i.value,write_time:new Date,content:t.value},success(e){1!=e.code?_.value=e.content.message:(_.value="",u.value="",t.value=""),g(1)},error(e){console.log("post发布失败"),_.value=e.message}}):_.value="只有作怪才能开始学习"},m=()=>{de().ajax({url:e.state.BaseUrl+"/api/post/",type:"delete",headers:{Authorization:"Bearer "+e.state.user.token},data:{user_id:e.state.user.user_id},success(e){1!=e.code?console.log("失败"):g(1)},error(e){console.log("失败"),_.value=e.message}})},g=t=>{t>3&&!e.state.user.is_login?alert("不给看了"):(s=t,de().ajax({url:e.state.BaseUrl+"/api/post/common/",type:"get",data:{page:s},success(e){1==e.code?(e=e.content,a.value=e.items,console.log(e),n=e.page_count,d()):console.log(e.message)},error(e){console.log(e.message),console.log("拿页面失败")}}))};g(1);const d=()=>{let e=parseInt(Math.ceil(n/l)),t=[];for(let a=s-2;a<s+2;a++)a>=1&&a<=e&&t.push({number:a,is_active:a===s?"active":""});o.value=t},w=e=>{-1===e?e=s-1:0===e&&(e=s+1);let t=parseInt(Math.ceil(n/l));e>=1&&e<=t&&g(e)};let b=(0,pe.iH)("");const h=()=>{let t=1;t=1+Math.floor(45*Math.random()),b.value="",t=28,de().ajax({type:"get",url:"https://v2.alapi.cn/api/mingyan",data:{typeid:t,token:e.state.music.token},success(e){b.value=e}})};return h(),{hitokoto:b,click_page:w,posts:a,showPage:o,content:t,timeLength:i,now_time:r,end_time:c,set_post:p,delete_post:m,tittle:u,error_message:_}}};const be=(0,r.Z)(we,[["render",_e],["__scopeId","data-v-08872c3b"]]);var he=be;const ve=e=>((0,l.dD)("data-v-0ddcc3a8"),e=e(),(0,l.Cn)(),e),ye={class:"modal",id:"myModal"},ke={class:"modal-dialog"},fe={class:"modal-content"},De=ve((()=>(0,l._)("div",{class:"modal-header"},[(0,l._)("p",{class:"text-primary",style:{"font-size":"larger","font-weight":"900"}},"发布学习"),(0,l._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal"})],-1))),ze={class:"modal-body"},Te={class:"form-label"},xe=ve((()=>(0,l._)("span",{class:"form-labe"},"开始时间: ",-1))),Ce={class:"text-info"},He=ve((()=>(0,l._)("br",null,null,-1))),Se=ve((()=>(0,l._)("span",{class:"form-labe"},"结束时间: ",-1))),Ie={class:"text-info"},je=ve((()=>(0,l._)("hr",null,null,-1))),Ue=ve((()=>(0,l._)("label",{for:"titleInput",class:"form-label"},"计划：",-1))),Le=ve((()=>(0,l._)("br",null,null,-1))),Ve=ve((()=>(0,l._)("label",{for:"titleInput",class:"form-label"},"详细内容：",-1))),Pe={class:"modal-footer"},Be=ve((()=>(0,l._)("button",{type:"button",class:"btn btn-danger","data-bs-dismiss":"modal"},"关闭",-1))),Me={class:"text-danger"},We={style:{"margin-top":"3%"}},qe={class:"table table-borderless"},Ae={scope:"col"},Ke={class:"text-warning",style:{"font-weight":"600"}},Re=ve((()=>(0,l._)("br",null,null,-1))),Ye={key:0,class:"btn btn-primary btn-sm","data-bs-toggle":"modal","data-bs-target":"#myModal",style:{float:"left"}},Ze={scope:"row"},$e={class:"card opacity-100"},Ee={class:"card-body"},Fe=ve((()=>(0,l._)("span",{class:""},[(0,l._)("kbd",null,"计划")],-1))),Ge={key:0,class:"small text-warning",style:{float:"right"}},Je={key:1,class:"small text-primary",style:{float:"right"}},Ne=ve((()=>(0,l._)("br",null,null,-1))),Oe=ve((()=>(0,l._)("span",{class:""},[(0,l._)("kbd",null,"内容")],-1))),Qe=ve((()=>(0,l._)("br",null,null,-1))),Xe=ve((()=>(0,l._)("span",{class:""},[(0,l._)("kbd",null,"开始时间")],-1))),et=ve((()=>(0,l._)("br",null,null,-1))),tt=ve((()=>(0,l._)("span",{class:""},[(0,l._)("kbd",null,"时长")],-1))),at=ve((()=>(0,l._)("br",null,null,-1))),lt=ve((()=>(0,l._)("span",{class:""},[(0,l._)("kbd",null,"来自")],-1))),st=["onClick"],nt={key:3,class:"progress"},ot={class:"card opacity-50"},it={class:"card-body"},rt={key:0,style:{"font-size":"small"}},ct={style:{float:"right"}},ut={"aria-label":"Page"},_t={class:"pagination",style:{float:"right"}},pt=ve((()=>(0,l._)("a",{class:"page-link",href:"#"},"上一页",-1))),mt=[pt],gt=["onClick"],dt={class:"page-link",href:"#"},wt=ve((()=>(0,l._)("a",{class:"page-link",href:"#"},"下一页",-1))),bt=[wt];function ht(e,t,a,s,n,o){const i=(0,l.up)("SpaceWar");return(0,l.wg)(),(0,l.j4)(i,null,{default:(0,l.w5)((()=>[(0,l._)("div",ye,[(0,l._)("div",ke,[(0,l._)("div",fe,[De,(0,l._)("div",ze,[(0,l._)("label",Te,"学习时长："+(0,_.zw)(s.timeLength)+"分钟",1),(0,l.wy)((0,l._)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>s.timeLength=e),type:"range",class:"form-range",min:"1",max:"180",id:"customRange2"},null,512),[[p.nr,s.timeLength]]),xe,(0,l._)("span",Ce,(0,_.zw)(s.now_time),1),He,Se,(0,l._)("span",Ie,(0,_.zw)(s.end_time),1),je,Ue,(0,l.wy)((0,l._)("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=e=>s.tittle=e),class:"form-control",id:"titleInput",placeholder:"学习科目/知识点..."},null,512),[[p.nr,s.tittle]]),Le,Ve,(0,l.wy)((0,l._)("textarea",{"onUpdate:modelValue":t[2]||(t[2]=e=>s.content=e),class:"form-control",id:"Textarea",placeholder:"描述学习...",rows:"4"},null,512),[[p.nr,s.content]])]),(0,l._)("div",Pe,[(0,l._)("button",{onClick:t[3]||(t[3]=(...e)=>s.set_post&&s.set_post(...e)),class:"btn btn-info"},"开始"),Be,(0,l._)("label",Me,(0,_.zw)(s.error_message),1)])])])]),(0,l._)("div",We,[(0,l._)("table",qe,[(0,l._)("thead",null,[(0,l._)("tr",null,[(0,l._)("th",Ae,[(0,l._)("p",Ke,[(0,l.Uk)("计划 "),Re,e.$store.state.user.is_login?((0,l.wg)(),(0,l.iD)("button",Ye,"开始我的学习")):(0,l.kq)("",!0)])])])]),(0,l._)("tbody",null,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(s.posts,(a=>((0,l.wg)(),(0,l.iD)("tr",{key:a.post_id},[(0,l._)("th",Ze,[(0,l._)("div",$e,[(0,l._)("div",Ee,[Fe,(0,l._)("span",{class:(0,_.C_)("small "+a.Tcolor)},(0,_.zw)(" "+a.tittle),3),(new Date).getTime()<new Date(a.write_time).getTime()+60*a.time_length*1e3?((0,l.wg)(),(0,l.iD)("span",Ge," 剩余 "+(0,_.zw)(Math.floor((new Date(a.write_time).getTime()+60*a.time_length*1e3-(new Date).getTime())/6e4))+" 分钟",1)):((0,l.wg)(),(0,l.iD)("span",Je,"已完成")),Ne,Oe,(0,l._)("span",{class:(0,_.C_)("small "+a.Tcolor)},(0,_.zw)(" "+a.content),3),Qe,Xe,(0,l._)("span",{class:(0,_.C_)("small "+a.Tcolor)},(0,_.zw)(" "+new Date(a.write_time).toLocaleString()),3),et,tt,(0,l._)("span",{class:(0,_.C_)("small "+a.Tcolor)},(0,_.zw)(" "+a.time_length)+"分钟   ",3),at,lt,(0,l._)("span",{onClick:t=>e.get_friend_info(a.user_id),class:(0,_.C_)("small "+a.Tcolor)},(0,_.zw)(" "+a.username),11,st),a.username==e.$store.state.user.username&&(new Date).getTime()<new Date(a.write_time).getTime()+60*a.time_length*1e3?((0,l.wg)(),(0,l.iD)("button",{key:2,onClick:t[4]||(t[4]=(...e)=>s.delete_post&&s.delete_post(...e)),class:"btn btn-info btn-sm",style:{float:"right"}},"取消计划")):(0,l.kq)("",!0),(new Date).getTime()<new Date(a.write_time).getTime()+60*a.time_length*1e3?((0,l.wg)(),(0,l.iD)("div",nt,[(0,l._)("div",{class:"progress-bar progress-bar-striped progress-bar-animated",role:"progressbar",style:(0,_.j5)("width: "+parseInt(((new Date).getTime()-new Date(a.write_time).getTime())/60/10/a.time_length)+"%;"),"aria-valuenow":"25","aria-valuemin":"0","aria-valuemax":"100"},(0,_.zw)(parseInt(((new Date).getTime()-new Date(a.write_time).getTime())/60/10/a.time_length))+"%",5)])):(0,l.kq)("",!0)])])])])))),128)),(0,l._)("div",ot,[(0,l._)("div",it,[""!=s.hitokoto?((0,l.wg)(),(0,l.iD)("span",rt,[(0,l._)("p",null,(0,_.zw)(s.hitokoto.data.content),1),(0,l._)("p",ct,(0,_.zw)("——"+s.hitokoto.data.author),1)])):(0,l.kq)("",!0)])])])]),(0,l._)("nav",ut,[(0,l._)("ul",_t,[(0,l._)("li",{class:"page-item",onClick:t[5]||(t[5]=e=>s.click_page(-1))},mt),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(s.showPage,(e=>((0,l.wg)(),(0,l.iD)("li",{onClick:t=>s.click_page(e.number),class:(0,_.C_)("page-item "+e.is_active),key:e.number},[(0,l._)("a",dt,(0,_.zw)(e.number),1)],10,gt)))),128)),(0,l._)("li",{class:"page-item",onClick:t[6]||(t[6]=e=>s.click_page(0))},bt)])])])])),_:1})}var vt={name:"PhoneStudyView",components:{SpaceWar:u},setup(){new Date;const e=(0,me.oR)();let t=(0,pe.iH)("");const a=(0,pe.iH)([]),l=6;let s=1,n=1,o=(0,pe.iH)([]),i=(0,pe.iH)();i.value=30;let r=(0,pe.iH)(""),c=(0,pe.iH)(""),u=(0,pe.iH)(""),_=(0,pe.iH)("");setInterval((()=>{r.value=(new Date).toLocaleTimeString(),c.value=new Date((new Date).getTime()+60*i.value*1e3).toLocaleTimeString()}),1e3);const p=()=>{_.value="",e.state.user.is_login?u.value.length<1||t.value.length<1?_.value="不能为空":de().ajax({url:e.state.BaseUrl+"/api/post/",type:"post",headers:{Authorization:"Bearer "+e.state.user.token},data:{user_id:e.state.user.user_id,tittle:u.value,time_length:i.value,write_time:new Date,content:t.value},success(e){1!=e.code?_.value=e.content.message:(_.value="",u.value="",t.value=""),g(1)},error(e){console.log("post发布失败"),_.value=e.message}}):_.value="只有作怪才能开始学习"},m=()=>{de().ajax({url:e.state.BaseUrl+"/api/post/",type:"delete",headers:{Authorization:"Bearer "+e.state.user.token},data:{user_id:e.state.user.user_id},success(e){1!=e.code?console.log("失败"):g(1)},error(e){console.log("失败"),_.value=e.message}})},g=t=>{t>3&&!e.state.user.is_login?alert("不给看了"):(s=t,de().ajax({url:e.state.BaseUrl+"/api/post/common/",type:"get",data:{page:s},success(e){1==e.code?(e=e.content,a.value=e.items,console.log(e),n=e.page_count,d()):console.log(e.message)},error(e){console.log(e.message),console.log("拿页面失败")}}))};g(1);const d=()=>{let e=parseInt(Math.ceil(n/l)),t=[];for(let a=s-2;a<s+2;a++)a>=1&&a<=e&&t.push({number:a,is_active:a===s?"active":""});o.value=t},w=e=>{-1===e?e=s-1:0===e&&(e=s+1);let t=parseInt(Math.ceil(n/l));e>=1&&e<=t&&g(e)};let b=(0,pe.iH)("");const h=()=>{b.value="",de().ajax({type:"get",url:"https://v2.alapi.cn/api/shici",data:{type:"all",token:e.state.music.token},success(e){b.value=e}})};return h(),{hitokoto:b,click_page:w,posts:a,showPage:o,content:t,timeLength:i,now_time:r,end_time:c,set_post:p,delete_post:m,tittle:u,error_message:_}}};const yt=(0,r.Z)(vt,[["render",ht],["__scopeId","data-v-0ddcc3a8"]]);var kt=yt,ft={name:"StudyView",components:{SpaceWar:u,PcStudyView:he,PhoneStudyView:kt},setup(){let e=(0,pe.iH)("");return e.value=document.documentElement.clientWidth,{is_phone:e}}};const Dt=(0,r.Z)(ft,[["render",s]]);var zt=Dt}}]);
//# sourceMappingURL=751.3e25d51e.js.map